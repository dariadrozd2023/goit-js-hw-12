import{a as b,S as L,i}from"./assets/vendor-f144e563.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const S="https://pixabay.com/api/",w="43910002-4f8293575df59775d1c0606c1";async function M(r,o,n){try{return(await b.get(S,{params:{key:w,q:r,image_type:"photo",orientation:"horizontal",safesearch:"true",lang:"en",page:o,per_page:n}})).data}catch(a){throw console.error(a),a}}function d(r){return r.map(({webformatURL:o,largeImageURL:n,tags:a,likes:t,views:s,comments:l,downloads:p})=>`
          <li class="js-list">
              <a href="${n}"><img class="js-image" src="${o}" alt="${a}" /></a>
              <ul class="js-dates">
                  <li class="js-likes">Likes: ${t}</li>
                  <li class="js-views">Views: ${s}</li>
                  <li class="js-comments">Comments: ${l}</li>
                  <li class="js-downloads">Downloads: ${p}</li>
              </ul>
          </li>
      `).join("")}const e={formSearch:document.getElementById("formSearch"),inputSearch:document.getElementById("inputSearch"),btnSearch:document.getElementById("btnSearch"),galleryList:document.querySelector(".js-ImagesCart"),loader:document.querySelector(".loader"),btnLoadMore:document.getElementById("btnLoadMore"),loaderNoMore:document.querySelector(".loaderNoMore")};e.formSearch.addEventListener("submit",I);e.btnLoadMore.addEventListener("click",j);const y=new L(".js-ImagesCart a",{captionsData:"alt",captionDelay:250});let c=1,g="",u=0,m=0;function E(){return e.inputSearch.value.trim()===""?(i.show({message:"Please, enter a search query!",timeout:5e3,backgroundColor:"#EF4040"}),!1):!0}async function I(r){r.preventDefault(),E()&&(g=e.inputSearch.value.trim(),e.galleryList.innerHTML="",e.loader.style.display="block",e.loaderNoMore.style.display="none",e.btnLoadMore.style.display="none",u=0,c=1,await h(15))}async function h(r){try{const o=await M(g,c,r);return o.hits.length===0?(i.show({message:"Sorry, there are no images matching your search query. Please, try again!",timeout:5e3,backgroundColor:"#EF4040"}),e.btnLoadMore.style.display="none",e.loaderNoMore.style.display="block"):(u+=o.hits.length,m=o.totalHits,c===1?e.galleryList.innerHTML=d(o.hits):(e.galleryList.insertAdjacentHTML("beforeend",d(o.hits)),f()),y.refresh(),u>=m?(e.btnLoadMore.style.display="none",e.loaderNoMore.style.display="block",i.show({message:"We're sorry, but you've reached the end of search results.",timeout:5e3,backgroundColor:"#EF4040"})):e.btnLoadMore.style.display="block"),o.hits}catch(o){console.error(o),i.show({message:"Something went wrong. Please, try again later.",timeout:5e3,backgroundColor:"#EF4040"})}finally{e.loader.style.display="none",e.formSearch.reset()}}function f(){const{height:r}=document.querySelector(".js-list").getBoundingClientRect();window.scrollBy({top:r*2,behavior:"smooth"})}async function j(){c+=1;try{const r=await h(15);e.galleryList.insertAdjacentHTML("beforeend",d(r)),y.refresh(),f()}catch(r){console.error(r.message),i.show({message:"Something went wrong. Please, try again later.",timeout:5e3,backgroundColor:"#EF4040"})}}
//# sourceMappingURL=commonHelpers.js.map
