{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst refs = {\n    formSearch: document.getElementById('formSearch'),\n    inputSearch: document.getElementById('inputSearch'),\n    btnSearch: document.getElementById('btnSearch'),\n    galleryList: document.querySelector('.js-ImagesCart'),\n    loader: document.querySelector('.loader'),\n\n  };\n\n  \n  export function checkInput() {\n    const inputValue = refs.inputSearch.value.trim();\n    const placeholderValue = refs.inputSearch.placeholder;\n  \n    if (inputValue === '' || inputValue === placeholderValue) {\n      iziToast.show({\n        message: 'Please, enter the name of the picture you are looking for',\n        timeout: 5000,\n        backgroundColor: '#a0cdde',\n      });\n  \n      refs.btnSearch.disabled = true; // робимо кнопку неактивною\n      return false;\n    } else {\n      refs.btnSearch.disabled = false; // робимо кнопку активною у разі успіху\n      return true;\n    }\n  }\n  // Додаємо обробники подій до інпуту для очищення та відновлення placeholder\nrefs.inputSearch.addEventListener('focus', () => {\n  refs.inputSearch.placeholder = ''; // Очищаємо placeholder при фокусі\n});\n\nrefs.inputSearch.addEventListener('blur', () => {\n  if (refs.inputSearch.value.trim() === '') {\n    refs.inputSearch.placeholder = 'Search images...'; // Відновлюємо placeholder при втраті фокуса, якщо інпут порожній\n  }\n});\n ","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport * as Pixibay from '/js/pixabay-api';\nimport axios from 'axios';\n\nconst refs = {\n  formSearch: document.getElementById('formSearch'),\n  inputSearch: document.getElementById('inputSearch'),\n  btnSearch: document.getElementById('btnSearch'),\n  galleryList: document.querySelector('.js-ImagesCart'),\n  loader: document.querySelector('.loader'),\n  btnLoadMore: document.getElementById('btnLoadMore'),\n};\n\nrefs.formSearch.addEventListener('submit', onBtnSearch);\nrefs.btnLoadMore.addEventListener('click', loadImgMore);\n\nconst lightbox = new SimpleLightbox('.js-ImagesCart a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst URL_SEARCH_IMAGES = 'https://pixabay.com/api/';\nconst API_KEY = '43910002-4f8293575df59775d1c0606c1';\n\nlet page = 1;\nlet inputValue = '';\n\nfunction checkInput() {\n  const input = refs.inputSearch.value.trim();\n  if (input === '') {\n    iziToast.show({\n      message: 'Please, enter a search query!',\n      timeout: 5000,\n      backgroundColor: '#EF4040',\n    });\n    return false;\n  }\n  return true;\n}\n\nexport function onBtnSearch(event) {\n  event.preventDefault();\n\n  if (!checkInput()) {\n    return;\n  }\n\n  inputValue = refs.inputSearch.value.trim();\n  refs.galleryList.innerHTML = '';\n  refs.loader.style.display = 'block';\n  page = 1; \n\n  getImages();\n}\n\nasync function getImages() {\n  try {\n    const response = await axios.get(URL_SEARCH_IMAGES, {\n      params: {\n        key: API_KEY,\n        q: inputValue,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        lang: 'en',\n        page: page,\n        per_page: 15,\n      },\n    });\n\n    const data = response.data;\n\n    if (data.hits.length === 0) {\n      iziToast.show({\n        message: 'Sorry, there are no images matching your search query. Please, try again!',\n        timeout: 5000,\n        backgroundColor: '#EF4040',\n      });\n      refs.btnLoadMore.style.display = 'none';\n    } else {\n    \n      if (page === 1) {\n        refs.galleryList.innerHTML = markUpSearchImg(data.hits);\n      } else {\n        refs.galleryList.insertAdjacentHTML('beforeend', markUpSearchImg(data.hits));\n\n        smoothScroll();\n      }\n      lightbox.refresh();\n\n\n      if (page * 15 >= data.totalHits) {\n        refs.btnLoadMore.style.display = 'none';\n      } else {\n        refs.btnLoadMore.style.display = 'block';\n      }\n    }\n    return data.hits;\n  } catch (error) {\n    console.error(error);\n    iziToast.show({\n      message: 'Something went wrong. Please, try again later.',\n      timeout: 5000,\n      backgroundColor: '#EF4040',\n    });\n  } finally {\n    refs.loader.style.display = 'none';\n    refs.formSearch.reset();\n  }\n}\n\nfunction markUpSearchImg(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n          <li class=\"js-list\">\n              <a href=\"${largeImageURL}\"><img class=\"js-image\" src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n              <ul class=\"js-dates\">\n                  <li class=\"js-likes\">Likes: ${likes}</li>\n                  <li class=\"js-views\">Views: ${views}</li>\n                  <li class=\"js-comments\">Comments: ${comments}</li>\n                  <li class=\"js-downloads\">Downloads: ${downloads}</li>\n              </ul>\n          </li>\n      `\n    )\n    .join('');\n}\nfunction smoothScroll() {\n  const { height: cardHeight } = document.querySelector('.js-list').getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n\nasync function loadImgMore() {\n  page += 1;\n\n  try {\n    const data = await getImages();\n    refs.galleryList.insertAdjacentHTML('beforeend', markUpSearchImg(data));\n  } catch (error) {\n    console.error(error.message);\n    iziToast.show({\n      message: 'Something went wrong. Please, try again later.',\n      timeout: 5000,\n      backgroundColor: '#EF4040',\n    });\n  }\n}\n","import * as Render from './js/render-functions';\nimport * as Pixibay from './js/pixabay-api';\n\nconst refs = {\n  formSearch: document.getElementById('formSearch'),\n  inputSearch: document.getElementById('inputSearch'),\n  btnSearch: document.getElementById('btnSearch'),\n  galleryList: document.querySelector('.js-ImagesCart'),\n  loader: document.querySelector('.loader'),\n\n};\n\nrefs.formSearch.addEventListener('submit', Pixibay.submitSearch);\nrefs.inputSearch.addEventListener('input', Pixibay.checkInput);\nrefs.btnSearch.addEventListener('click', Render.onBtnSearch);\n"],"names":["refs","checkInput","inputValue","placeholderValue","iziToast","onBtnSearch","loadImgMore","lightbox","SimpleLightbox","URL_SEARCH_IMAGES","API_KEY","page","event","getImages","data","axios","markUpSearchImg","smoothScroll","error","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","cardHeight","Pixibay.submitSearch","Pixibay.checkInput","Render.onBtnSearch"],"mappings":"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"}